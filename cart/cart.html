<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart</title>
    <link href="https://fonts.googleapis.com/css2?family=Boldonse&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Boldonse&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../index.css">
    <link rel="stylesheet" href="../favouritesPage/favPage.css">
    <link rel="stylesheet" href="../product_pages/products-render.css">
    <link rel="stylesheet" href="./cart.css">
    <link rel="icon" type="image/x-icon" href="../assets/logo1.png">
</head>
<body>
    <div class="loader-wrapper">
        <div class="loader">
            <span class="loader-inner"><span>WTPRINTS<div class="loader-in-line"></div></span></span>
        </div>
    </div>
    <header class="navtotal" style="height: 70px;">
        <div class="navbar">
            <a href="../index.html">
                <div class="nav-logo">
                    <h1 class="nav-txt">WTPRINTS</h1>
                </div>
            </a>
            <div class="nav-components">
                <a href="wtprints-de.vercel.app">
                    <div>
                        <div>
                            <p style="font-size: large;">My Designs</p>
                        </div>
                    </div>
                </a>
                
                <a href="../login.html" class="login-token">
                    <div>
                        <div>
                            <p style="font-size: large;">Sign in/up</p>
                        </div>
                    </div>
                </a>
                
                <!-- <a href="#">
                    <div>
                        <div>
                            <img src="assets/Xerox.png" alt="Xerox"><p>Xerox ?</p>
                        </div>
                    </div>
                </a> -->
                <div class="nav-icons">
                    <a href="../favouritesPage/favPage.html">
                            <div>
                                <div>
                                    <img src="../assets/favourites-icon-unclick.png" alt="favourites">
                                    <div style="position: fixed;background-color: #ee0652;width: 18px;height: 18px;border-radius: 50%;margin-left: 20px;margin-bottom: 20px;display: flex;justify-content: center;"><p><span class="js-favourites-count" style="color: white;">0</span></p></div>
                                </div>
                            </div>
                        </a>
                    <a href="#">
                        <div>
                            <div index="three-dots" onmouseover=blackscreen() on onmouseleave=blackscreenout()>
                                <img src="../assets/three-dots.png" alt="Help" style="width: 25px;height: 25px;">
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </header>
    <div class="new-body js-cart-body filter-blur" id="main">
        <div class="cart-body">
            <h1 class="cart-page-title">Shopping Cart</h1>
            <div class="cart-render">
                <!-- Products will be rendered here -->
            </div>
        </div>
        <aside class="cart-checkout">
            <div class="checkout-sticky">
                <h2 class="checkout-title">Order Summary</h2>
                <div class="checkout-item">
                    <span>Items (<span id="itemCount">0</span>):</span>
                    <span>$<span id="subtotal">0.00</span></span>
                </div>
                <div class="checkout-item">
                    <span>Shipping:</span>
                    <span>$<span id="shipping">0.00</span></span>
                </div>
                <div class="checkout-item">
                    <span>Tax (10%):</span>
                    <span>$<span id="tax">0.00</span></span>
                </div>
                <div class="checkout-item total">
                    <span>Total:</span>
                    <span>$<span id="total">0.00</span></span>
                </div>
                <button class="checkout-btn" id="checkoutBtn">Proceed to Checkout</button>
                <a href="../index.html" class="continue-shopping">Continue Shopping</a>
            </div>
        </aside>
    </div>
    <script src="./cart.js"></script>
    <script>
        window.addEventListener("load", function() {
            document.querySelector(".loader-wrapper").style.display = "none";
            document.querySelector(".filter-blur").classList.remove("filter-blur");
            
            // Update login status
            updateLoginStatus();
        });
        
        function blackscreen(){
            document.getElementById("main").style.opacity=0.5;
        }
        
        function blackscreenout(){
            document.getElementById("main").style.opacity=1;
        }
        
        function updateLoginStatus(){
            const urlParams = new URLSearchParams(window.location.search);
            if(urlParams.get('login') === 'success'){
                localStorage.setItem('login-token', true);
                localStorage.setItem('wt_user', JSON.stringify({
                    name: urlParams.get('wt_user'),
                    email: urlParams.get('email')
                }));
            }

            const loginLinks = document.querySelectorAll('a[href="../login.html"]');
            if(localStorage.getItem('login-token') === 'true'){
                loginLinks.forEach(link => {
                    const pTag = link.querySelector('p');
                    if(pTag && pTag.textContent.trim() === 'Sign in/up'){
                        link.href = "../user/user.html";
                        pTag.textContent = "My Account";
                    }
                });
            }
        }
    </script>
</body>
</html>